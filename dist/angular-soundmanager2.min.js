/*! angular-soundmanager2 22-04-2015 */
!function(a,b){"use strict";function d(c,d){function lb(a){return f.preferFlash&&Ka&&!f.ignoreFlash&&f.flash[a]!==b&&f.flash[a]}function mb(a){return function(b){var d,c=this._s;return c&&c._a?d=a.call(this,b):(c&&c.id?f._wD(c.id+": Ignoring "+b.type):f._wD(k+"Ignoring "+b.type),d=null),d}}this.setupOptions={url:c||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=d||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20140901",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var e,l,p,q,r,s,v,B,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,aa,ba,ca,fa,ga,ha,ia,ja,ka,la,ma,na,qa,ra,sa,va,xa,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,f=this,g=null,h=null,i="soundManager",j=i+": ",k="HTML5::",m=navigator.userAgent,n=a.location.href.toString(),o=document,t=[],u=!0,w=!1,x=!1,y=!1,z=!1,A=!1,C=0,$=["log","info","warn","error"],_=8,da=null,ea=null,oa=!1,pa=!1,ta=0,ua=null,wa=[],ya=null,Ha=Array.prototype.slice,Ia=!1,Ra=0,Sa=m.match(/(ipad|iphone|ipod)/i),Ta=m.match(/android/i),Ua=m.match(/msie/i),Va=m.match(/webkit/i),Wa=m.match(/safari/i)&&!m.match(/chrome/i),Xa=m.match(/opera/i),Ya=m.match(/(mobile|pre\/|xoom)/i)||Sa||Ta,Za=!n.match(/usehtml5audio/i)&&!n.match(/sm2\-ignorebadua/i)&&Wa&&!m.match(/silk/i)&&m.match(/OS X 10_6_([3-7])/i),$a=a.console!==b&&console.log!==b,_a=o.hasFocus!==b?o.hasFocus():null,ab=Wa&&(o.hasFocus===b||!o.hasFocus()),bb=!ab,cb=/(mp3|mp4|mpa|m4a|m4b)/i,db=1e3,eb="about:blank",fb="data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==",gb=o.location?o.location.protocol.match(/http/i):null,hb=gb?"":"http://",ib=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,jb=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],kb=new RegExp("\\.("+jb.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!gb,ia={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},this.hasHTML5=function(){try{return Audio!==b&&(Xa&&opera!==b&&opera.version()<10?new Audio(null):new Audio).canPlayType!==b}catch(a){return!1}}(),this.setup=function(a){var c=!f.url;return a!==b&&y&&ya&&f.ok()&&(a.flashVersion!==b||a.url!==b||a.html5Test!==b)&&ma(fa("setupLate")),F(a),a&&(c&&U&&a.url!==b&&f.beginDelayedInit(),U||a.url===b||"complete"!==o.readyState||setTimeout(S,1)),f},this.ok=function(){return ya?y&&!z:f.useHTML5Audio&&f.hasHTML5},this.supported=this.ok,this.getMovie=function(b){return l(b)||o[b]||a[b]},this.createSound=function(a,c){function l(){return j=ka(j),f.sounds[j.id]=new e(j),f.soundIDs.push(j.id),f.sounds[j.id]}var d,g,j,k=null;if(d=i+".createSound(): ",g=d+fa(y?"notOK":"notReady"),!y||!f.ok())return ma(g),!1;if(c!==b&&(a={id:a,url:c}),j=E(a),j.url=va(j.url),void 0===j.id&&(j.id=f.setupOptions.idPrefix+Ra++),j.id.toString().charAt(0).match(/^[0-9]$/)&&f._wD(d+fa("badID",j.id),2),f._wD(d+j.id+(j.url?" ("+j.url+")":""),1),na(j.id,!0))return f._wD(d+j.id+" exists",1),f.sounds[j.id];if(Aa(j))k=l(),f._wD(j.id+": Using HTML5"),k._setup_html5(j);else{if(f.html5Only)return f._wD(j.id+": No HTML5 support for this sound, and no Flash. Exiting."),l();if(f.html5.usingFlash&&j.url&&j.url.match(/data\:/i))return f._wD(j.id+": data: URIs not supported via Flash. Exiting."),l();s>8&&(null===j.isMovieStar&&(j.isMovieStar=!!(j.serverURL||!!j.type&&j.type.match(ib)||j.url&&j.url.match(kb))),j.isMovieStar&&(f._wD(d+"using MovieStar handling"),j.loops>1&&B("noNSLoop"))),j=la(j,d),k=l(),8===s?h._createSound(j.id,j.loops||1,j.usePolicyFile):(h._createSound(j.id,j.url,j.usePeakData,j.useWaveformData,j.useEQData,j.isMovieStar,!!j.isMovieStar&&j.bufferTime,j.loops||1,j.serverURL,j.duration||null,j.autoPlay,!0,j.autoLoad,j.usePolicyFile),j.serverURL||(k.connected=!0,j.onconnect&&j.onconnect.apply(k))),j.serverURL||!j.autoLoad&&!j.autoPlay||k.load(j)}return!j.serverURL&&j.autoPlay&&k.play(),k},this.destroySound=function(a,b){if(!na(a))return!1;var d,c=f.sounds[a];for(c._iO={},c.stop(),c.unload(),d=0;d<f.soundIDs.length;d++)if(f.soundIDs[d]===a){f.soundIDs.splice(d,1);break}return b||c.destruct(!0),c=null,delete f.sounds[a],!0},this.load=function(a,b){return!!na(a)&&f.sounds[a].load(b)},this.unload=function(a){return!!na(a)&&f.sounds[a].unload()},this.onPosition=function(a,b,c,d){return!!na(a)&&f.sounds[a].onposition(b,c,d)},this.onposition=this.onPosition,this.clearOnPosition=function(a,b,c){return!!na(a)&&f.sounds[a].clearOnPosition(b,c)},this.play=function(a,b){var c=null,d=b&&!(b instanceof Object);if(!y||!f.ok())return ma(i+".play(): "+fa(y?"notOK":"notReady")),!1;if(na(a,d))d&&(b={url:b});else{if(!d)return!1;d&&(b={url:b}),b&&b.url&&(f._wD(i+'.play(): Attempting to create "'+a+'"',1),b.id=a,c=f.createSound(b).play())}return null===c&&(c=f.sounds[a].play(b)),c},this.start=this.play,this.playSingleTrack=function(a){var b=null;if(!y||!f.ok())return ma(i+".play(): "+fa(y?"notOK":"notReady")),!1;var c={url:a},d=999999*Math.random();return c&&c.url&&(f._wD(i+'.play(): Attempting to create "'+d+'"',1),c.id=d,b=f.createSound(c).play()),null===b&&(b=f.sounds[d].play(c)),b},this.setPosition=function(a,b){return!!na(a)&&f.sounds[a].setPosition(b)},this.stop=function(a){return!!na(a)&&(f._wD(i+".stop("+a+")",1),f.sounds[a].stop())},this.stopAll=function(){var a;f._wD(i+".stopAll()",1);for(a in f.sounds)f.sounds.hasOwnProperty(a)&&f.sounds[a].stop()},this.pause=function(a){return!!na(a)&&f.sounds[a].pause()},this.pauseAll=function(){var a;for(a=f.soundIDs.length-1;a>=0;a--)f.sounds[f.soundIDs[a]].pause()},this.resume=function(a){return!!na(a)&&f.sounds[a].resume()},this.resumeAll=function(){var a;for(a=f.soundIDs.length-1;a>=0;a--)f.sounds[f.soundIDs[a]].resume()},this.togglePause=function(a){return!!na(a)&&f.sounds[a].togglePause()},this.setPan=function(a,b){return!!na(a)&&f.sounds[a].setPan(b)},this.setVolume=function(a,b){return!!na(a)&&f.sounds[a].setVolume(b)},this.mute=function(a){var b=0;if(a instanceof String&&(a=null),a)return!!na(a)&&(f._wD(i+'.mute(): Muting "'+a+'"'),f.sounds[a].mute());for(f._wD(i+".mute(): Muting all sounds"),b=f.soundIDs.length-1;b>=0;b--)f.sounds[f.soundIDs[b]].mute();return f.muted=!0,!0},this.muteAll=function(){f.mute()},this.unmute=function(a){var b;if(a instanceof String&&(a=null),a)return!!na(a)&&(f._wD(i+'.unmute(): Unmuting "'+a+'"'),f.sounds[a].unmute());for(f._wD(i+".unmute(): Unmuting all sounds"),b=f.soundIDs.length-1;b>=0;b--)f.sounds[f.soundIDs[b]].unmute();return f.muted=!1,!0},this.unmuteAll=function(){f.unmute()},this.toggleMute=function(a){return!!na(a)&&f.sounds[a].toggleMute()},this.getMemoryUse=function(){var a=0;return h&&8!==s&&(a=parseInt(h._getMemoryUse(),10)),a},this.disable=function(c){var d;if(c===b&&(c=!1),z)return!1;for(z=!0,B("shutdown",1),d=f.soundIDs.length-1;d>=0;d--)aa(f.sounds[f.soundIDs[d]]);return D(c),Ga.remove(a,"load",J),!0},this.canPlayMIME=function(a){var b;return f.hasHTML5&&(b=Ba({type:a})),!b&&ya&&(b=a&&f.ok()?!!((s>8?a.match(ib):null)||a.match(f.mimePattern)):null),b},this.canPlayURL=function(a){var b;return f.hasHTML5&&(b=Ba({url:a})),!b&&ya&&(b=a&&f.ok()?!!a.match(f.filePattern):null),b},this.canPlayLink=function(a){return!(a.type===b||!a.type||!f.canPlayMIME(a.type))||f.canPlayURL(a.href)},this.getSoundById=function(a,b){if(!a)return null;var c=f.sounds[a];return c||b||f._wD(i+'.getSoundById(): Sound "'+a+'" not found.',2),c},this.onready=function(b,c){var d="onready",e=!1;if("function"!=typeof b)throw fa("needFunction",d);return y&&f._wD(fa("queue",d)),c||(c=a),H(d,b,c),I(),e=!0,e},this.ontimeout=function(b,c){var d="ontimeout",e=!1;if("function"!=typeof b)throw fa("needFunction",d);return y&&f._wD(fa("queue",d)),c||(c=a),H(d,b,c),I({type:d}),e=!0,e},this._writeDebug=function(a,c){var e,g,d="soundmanager-debug";return!!f.debugMode&&(!!($a&&f.useConsole&&(c&&"object"==typeof c?console.log(a,c):$[c]!==b?console[$[c]](a):console.log(a),f.consoleOnly))||!!(e=l(d))&&(g=o.createElement("div"),++C%2===0&&(g.className="sm2-alt"),c=c===b?0:parseInt(c,10),g.appendChild(o.createTextNode(a)),c&&(c>=2&&(g.style.fontWeight="bold"),3===c&&(g.style.color="#ff3333")),e.insertBefore(g,e.firstChild),e=null,!0))},n.indexOf("sm2-debug=alert")!==-1&&(this._writeDebug=function(b){a.alert(b)}),this._wD=this._writeDebug,this._debug=function(){var a,b;for(B("currentObj",1),a=0,b=f.soundIDs.length;a<b;a++)f.sounds[f.soundIDs[a]]._debug()},this.reboot=function(b,c){f.soundIDs.length&&f._wD("Destroying "+f.soundIDs.length+" SMSound object"+(1!==f.soundIDs.length?"s":"")+"...");var d,e,g;for(d=f.soundIDs.length-1;d>=0;d--)f.sounds[f.soundIDs[d]].destruct();if(h)try{Ua&&(ea=h.innerHTML),da=h.parentNode.removeChild(h)}catch(a){B("badRemove",2)}if(ea=da=ya=h=null,f.enabled=U=y=oa=pa=w=x=z=Ia=f.swfLoaded=!1,f.soundIDs=[],f.sounds={},Ra=0,b)t=[];else for(d in t)if(t.hasOwnProperty(d))for(e=0,g=t[d].length;e<g;e++)t[d][e].fired=!1;return c||f._wD(i+": Rebooting..."),f.html5={usingFlash:null},f.flash={},f.html5Only=!1,f.ignoreFlash=!1,a.setTimeout(function(){R(),c||f.beginDelayedInit()},20),f},this.reset=function(){return B("reset"),f.reboot(!0,!0)},this.getMoviePercent=function(){return h&&"PercentLoaded"in h?h.PercentLoaded():null},this.beginDelayedInit=function(){A=!0,S(),setTimeout(function(){return!pa&&(W(),Q(),pa=!0,!0)},20),K()},this.destruct=function(){f._wD(i+".destruct()"),f.disable(!0)},e=function(a){var d,e,i,j,k,l,p,q,t,u,c=this,m=!1,n=[],o=0,r=null;t={duration:null,time:null},this.id=a.id,this.sID=this.id,this.url=a.url,this.options=E(a),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,u=!this.url,this.id3={},this._debug=function(){f._wD(c.id+": Merged options:",c.options)},this.load=function(a){var e,d=null;if(a!==b?c._iO=E(a,c.options):(a=c.options,c._iO=a,r&&r!==c.url&&(B("manURL"),c._iO.url=c.url,c.url=null)),c._iO.url||(c._iO.url=c.url),c._iO.url=va(c._iO.url),c.instanceOptions=c._iO,e=c._iO,f._wD(c.id+": load ("+e.url+")"),!e.url&&!c.url)return f._wD(c.id+": load(): url is unassigned. Exiting.",2),c;if(c.isHTML5||8!==s||c.url||e.autoPlay||f._wD(c.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),e.url===c.url&&0!==c.readyState&&2!==c.readyState)return B("onURL",1),3===c.readyState&&e.onload&&Qa(c,function(){e.onload.apply(c,[!!c.duration])}),c;if(c.loaded=!1,c.readyState=1,c.playState=0,c.id3={},Aa(e))d=c._setup_html5(e),d._called_load?f._wD(c.id+": Ignoring request to load again"):(c._html5_canplay=!1,c.url!==e.url&&(f._wD(B("manURL")+": "+e.url),c._a.src=e.url,c.setPosition(0)),c._a.autobuffer="auto",c._a.preload="auto",c._a._called_load=!0);else{if(f.html5Only)return f._wD(c.id+": No flash support. Exiting."),c;if(c._iO.url&&c._iO.url.match(/data\:/i))return f._wD(c.id+": data: URIs not supported via Flash. Exiting."),c;try{c.isHTML5=!1,c._iO=la(ka(e)),c._iO.autoPlay&&(c._iO.position||c._iO.from)&&(f._wD(c.id+": Disabling autoPlay because of non-zero offset case"),c._iO.autoPlay=!1),e=c._iO,8===s?h._load(c.id,e.url,e.stream,e.autoPlay,e.usePolicyFile):h._load(c.id,e.url,!!e.stream,!!e.autoPlay,e.loops||1,!!e.autoLoad,e.usePolicyFile)}catch(a){B("smError",2),v("onload",!1),X({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return c.url=e.url,c},this.unload=function(){return 0!==c.readyState&&(f._wD(c.id+": unload()"),c.isHTML5?(j(),c._a&&(c._a.pause(),r=Da(c._a))):8===s?h._unload(c.id,eb):h._unload(c.id),d()),c},this.destruct=function(a){f._wD(c.id+": Destruct"),c.isHTML5?(j(),c._a&&(c._a.pause(),Da(c._a),Ia||i(),c._a._s=null,c._a=null)):(c._iO.onfailure=null,h._destroySound(c.id)),a||f.destroySound(c.id,!0)},this.play=function(a,d){var e,g,i,j,n,o,p,r=!0,t=null;if(e=c.id+": play(): ",d=d===b||d,a||(a={}),c.url&&(c._iO.url=c.url),c._iO=E(c._iO,c.options),c._iO=E(a,c._iO),c._iO.url=va(c._iO.url),c.instanceOptions=c._iO,!c.isHTML5&&c._iO.serverURL&&!c.connected)return c.getAutoPlay()||(f._wD(e+" Netstream not connected yet - setting autoPlay"),c.setAutoPlay(!0)),c;if(Aa(c._iO)&&(c._setup_html5(c._iO),k()),1!==c.playState||c.paused||(g=c._iO.multiShot,g?f._wD(e+"Already playing (multi-shot)",1):(f._wD(e+"Already playing (one-shot)",1),c.isHTML5&&c.setPosition(c._iO.position),t=c)),null!==t)return t;if(a.url&&a.url!==c.url&&(c.readyState||c.isHTML5||8!==s||!u?c.load(c._iO):u=!1),c.loaded?f._wD(e.substr(0,e.lastIndexOf(":"))):0===c.readyState?(f._wD(e+"Attempting to load"),c.isHTML5||f.html5Only?c.isHTML5?c.load(c._iO):(f._wD(e+"Unsupported type. Exiting."),t=c):(c._iO.autoPlay=!0,c.load(c._iO)),c.instanceOptions=c._iO):2===c.readyState?(f._wD(e+"Could not load - exiting",2),t=c):f._wD(e+"Loading - attempting to play..."),null!==t)return t;if(!c.isHTML5&&9===s&&c.position>0&&c.position===c.duration&&(f._wD(e+"Sound at end, resetting to position:0"),a.position=0),c.paused&&c.position>=0&&(!c._iO.serverURL||c.position>0))f._wD(e+"Resuming from paused state",1),c.resume();else{if(c._iO=E(a,c._iO),(!c.isHTML5&&null!==c._iO.position&&c._iO.position>0||null!==c._iO.from&&c._iO.from>0||null!==c._iO.to)&&0===c.instanceCount&&0===c.playState&&!c._iO.serverURL){if(j=function(){c._iO=E(a,c._iO),c.play(c._iO)},c.isHTML5&&!c._html5_canplay?(f._wD(e+"Beginning load for non-zero offset case"),c.load({_oncanplay:j}),t=!1):c.isHTML5||c.loaded||c.readyState&&2===c.readyState||(f._wD(e+"Preloading for non-zero offset case"),c.load({onload:j}),t=!1),null!==t)return t;c._iO=q()}(!c.instanceCount||c._iO.multiShotEvents||c.isHTML5&&c._iO.multiShot&&!Ia||!c.isHTML5&&s>8&&!c.getAutoPlay())&&c.instanceCount++,c._iO.onposition&&0===c.playState&&l(c),c.playState=1,c.paused=!1,c.position=c._iO.position===b||isNaN(c._iO.position)?0:c._iO.position,c.isHTML5||(c._iO=la(ka(c._iO))),c._iO.onplay&&d&&(c._iO.onplay.apply(c),m=!0),c.setVolume(c._iO.volume,!0),c.setPan(c._iO.pan,!0),c.isHTML5?c.instanceCount<2?(k(),i=c._setup_html5(),c.setPosition(c._iO.position),i.play()):(f._wD(c.id+": Cloning Audio() for instance #"+c.instanceCount+"..."),n=new Audio(c._iO.url),o=function(){Ga.remove(n,"ended",o),c._onfinish(c),Da(n),n=null},p=function(){Ga.remove(n,"canplay",p);try{n.currentTime=c._iO.position/db}catch(a){ma(c.id+": multiShot play() failed to apply position of "+c._iO.position/db)}n.play()},Ga.add(n,"ended",o),void 0!==c._iO.volume&&(n.volume=Math.max(0,Math.min(1,c._iO.volume/100))),c.muted&&(n.muted=!0),c._iO.position?Ga.add(n,"canplay",p):n.play()):(r=h._start(c.id,c._iO.loops||1,9===s?c.position:c.position/db,c._iO.multiShot||!1),9!==s||r||(f._wD(e+"No sound hardware, or 32-sound ceiling hit",2),c._iO.onplayerror&&c._iO.onplayerror.apply(c)))}return c},this.start=this.play,this.stop=function(a){var d,b=c._iO;return 1===c.playState&&(f._wD(c.id+": stop()"),c._onbufferchange(0),c._resetOnPosition(0),c.paused=!1,c.isHTML5||(c.playState=0),p(),b.to&&c.clearOnPosition(b.to),c.isHTML5?c._a&&(d=c.position,c.setPosition(0),c.position=d,c._a.pause(),c.playState=0,c._onTimer(),j()):(h._stop(c.id,a),b.serverURL&&c.unload()),c.instanceCount=0,c._iO={},b.onstop&&b.onstop.apply(c)),c},this.setAutoPlay=function(a){f._wD(c.id+": Autoplay turned "+(a?"on":"off")),c._iO.autoPlay=a,c.isHTML5||(h._setAutoPlay(c.id,a),a&&(c.instanceCount||1!==c.readyState||(c.instanceCount++,f._wD(c.id+": Incremented instance count to "+c.instanceCount))))},this.getAutoPlay=function(){return c._iO.autoPlay},this.setPosition=function(a){a===b&&(a=0);var d,e,g=c.isHTML5?Math.max(a,0):Math.min(c.duration||c._iO.duration,Math.max(a,0));if(c.position=g,e=c.position/db,c._resetOnPosition(c.position),c._iO.position=g,c.isHTML5){if(c._a){if(c._html5_canplay){if(c._a.currentTime!==e){f._wD(c.id+": setPosition("+e+")");try{c._a.currentTime=e,(0===c.playState||c.paused)&&c._a.pause()}catch(a){f._wD(c.id+": setPosition("+e+") failed: "+a.message,2)}}}else if(e)return f._wD(c.id+": setPosition("+e+"): Cannot seek yet, sound not ready",2),c;c.paused&&c._onTimer(!0)}}else d=9===s?c.position:e,c.readyState&&2!==c.readyState&&h._setPosition(c.id,d,c.paused||!c.playState,c._iO.multiShot);return c},this.pause=function(a){return c.paused||0===c.playState&&1!==c.readyState?c:(f._wD(c.id+": pause()"),c.paused=!0,c.isHTML5?(c._setup_html5().pause(),j()):(a||a===b)&&h._pause(c.id,c._iO.multiShot),c._iO.onpause&&c._iO.onpause.apply(c),c)},this.resume=function(){var a=c._iO;return c.paused?(f._wD(c.id+": resume()"),c.paused=!1,c.playState=1,c.isHTML5?(c._setup_html5().play(),k()):(a.isMovieStar&&!a.serverURL&&c.setPosition(c.position),h._pause(c.id,a.multiShot)),!m&&a.onplay?(a.onplay.apply(c),m=!0):a.onresume&&a.onresume.apply(c),c):c},this.togglePause=function(){return f._wD(c.id+": togglePause()"),0===c.playState?(c.play({position:9!==s||c.isHTML5?c.position/db:c.position}),c):(c.paused?c.resume():c.pause(),c)},this.setPan=function(a,d){return a===b&&(a=0),d===b&&(d=!1),c.isHTML5||h._setPan(c.id,a),c._iO.pan=a,d||(c.pan=a,c.options.pan=a),c},this.setVolume=function(a,d){return a===b&&(a=100),d===b&&(d=!1),c.isHTML5?c._a&&(f.muted&&!c.muted&&(c.muted=!0,c._a.muted=!0),c._a.volume=Math.max(0,Math.min(1,a/100))):h._setVolume(c.id,f.muted&&!c.muted||c.muted?0:a),c._iO.volume=a,d||(c.volume=a,c.options.volume=a),c},this.mute=function(){return c.muted=!0,c.isHTML5?c._a&&(c._a.muted=!0):h._setVolume(c.id,0),c},this.unmute=function(){c.muted=!1;var a=c._iO.volume!==b;return c.isHTML5?c._a&&(c._a.muted=!1):h._setVolume(c.id,a?c._iO.volume:c.options.volume),c},this.toggleMute=function(){return c.muted?c.unmute():c.mute()},this.onPosition=function(a,d,e){return n.push({position:parseInt(a,10),method:d,scope:e!==b?e:c,fired:!1}),c},this.onposition=this.onPosition,this.clearOnPosition=function(a,b){var c;if(a=parseInt(a,10),isNaN(a))return!1;for(c=0;c<n.length;c++)a===n[c].position&&(b&&b!==n[c].method||(n[c].fired&&o--,n.splice(c,1)))},this._processOnPosition=function(){var a,b,d=n.length;if(!d||!c.playState||o>=d)return!1;for(a=d-1;a>=0;a--)b=n[a],!b.fired&&c.position>=b.position&&(b.fired=!0,o++,b.method.apply(b.scope,[b.position]),d=n.length);return!0},this._resetOnPosition=function(a){var b,c,d=n.length;if(!d)return!1;for(b=d-1;b>=0;b--)c=n[b],c.fired&&a<=c.position&&(c.fired=!1,o--);return!0},q=function(){var e,g,a=c._iO,b=a.from,d=a.to;return g=function(){f._wD(c.id+': "To" time of '+d+" reached."),c.clearOnPosition(d,g),c.stop()},e=function(){f._wD(c.id+': Playing "from" '+b),null===d||isNaN(d)||c.onPosition(d,g)},null===b||isNaN(b)||(a.position=b,a.multiShot=!1,e()),a},l=function(){var a,b=c._iO.onposition;if(b)for(a in b)b.hasOwnProperty(a)&&c.onPosition(parseInt(a,10),b[a])},p=function(){var a,b=c._iO.onposition;if(b)for(a in b)b.hasOwnProperty(a)&&c.clearOnPosition(parseInt(a,10))},k=function(){c.isHTML5&&qa(c)},j=function(){c.isHTML5&&ra(c)},d=function(a){a||(n=[],o=0),m=!1,c._hasTimer=null,c._a=null,c._html5_canplay=!1,c.bytesLoaded=null,c.bytesTotal=null,c.duration=c._iO&&c._iO.duration?c._iO.duration:null,c.durationEstimate=null,c.buffered=[],c.eqData=[],c.eqData.left=[],c.eqData.right=[],c.failures=0,c.isBuffering=!1,c.instanceOptions={},c.instanceCount=0,c.loaded=!1,c.metadata={},c.readyState=0,c.muted=!1,c.paused=!1,c.peakData={left:0,right:0},c.waveformData={left:[],right:[]},c.playState=0,c.position=null,c.id3={}},d(),this._onTimer=function(a){var b,e,d=!1,f={};if(c._hasTimer||a)return c._a&&(a||(c.playState>0||1===c.readyState)&&!c.paused)&&(b=c._get_html5_duration(),b!==t.duration&&(t.duration=b,c.duration=b,d=!0),c.durationEstimate=c.duration,e=c._a.currentTime*db||0,e!==t.time&&(t.time=e,d=!0),(d||a)&&c._whileplaying(e,f,f,f,f)),d},this._get_html5_duration=function(){var a=c._iO,b=c._a&&c._a.duration?c._a.duration*db:a&&a.duration?a.duration:null,d=b&&!isNaN(b)&&b!==1/0?b:null;return d},this._apply_loop=function(a,b){!a.loop&&b>1&&f._wD("Note: Native HTML5 looping is infinite.",1),a.loop=b>1?"loop":""},this._setup_html5=function(a){var i,b=E(c._iO,a),f=Ia?g:c._a,h=decodeURI(b.url);if(Ia?h===decodeURI(Ja)&&(i=!0):h===decodeURI(r)&&(i=!0),f){if(f._s)if(Ia)f._s&&f._s.playState&&!i&&f._s.stop();else if(!Ia&&h===decodeURI(r))return c._apply_loop(f,b.loops),f;i||(r&&d(!1),f.src=b.url,c.url=b.url,r=b.url,Ja=b.url,f._called_load=!1)}else b.autoLoad||b.autoPlay?(c._a=new Audio(b.url),c._a.load()):c._a=Xa&&opera.version()<10?new Audio(null):new Audio,f=c._a,f._called_load=!1,Ia&&(g=f);return c.isHTML5=!0,c._a=f,f._s=c,e(),c._apply_loop(f,b.loops),b.autoLoad||b.autoPlay?c.load():(f.autobuffer=!1,f.preload="auto"),f},e=function(){function b(a,b,d){return c._a?c._a.addEventListener(a,b,d||!1):null}if(c._a._added_events)return!1;var a;c._a._added_events=!0;for(a in Na)Na.hasOwnProperty(a)&&b(a,Na[a]);return!0},i=function(){function b(a,b,d){return c._a?c._a.removeEventListener(a,b,d||!1):null}var a;f._wD(c.id+": Removing event listeners"),c._a._added_events=!1;for(a in Na)Na.hasOwnProperty(a)&&b(a,Na[a])},this._onload=function(a){var b,d=!!a||!c.isHTML5&&8===s&&c.duration;return b=c.id+": ",f._wD(b+(d?"onload()":"Failed to load / invalid sound?"+(c.duration?" -":" Zero-length duration reported.")+" ("+c.url+")"),d?1:2),d||c.isHTML5||(f.sandbox.noRemote===!0&&f._wD(b+fa("noNet"),1),f.sandbox.noLocal===!0&&f._wD(b+fa("noLocal"),1)),c.loaded=d,c.readyState=d?3:2,c._onbufferchange(0),c._iO.onload&&Qa(c,function(){c._iO.onload.apply(c,[d])}),!0},this._onbufferchange=function(a){return 0!==c.playState&&(!(a&&c.isBuffering||!a&&!c.isBuffering)&&(c.isBuffering=1===a,c._iO.onbufferchange&&(f._wD(c.id+": Buffer state change: "+a),c._iO.onbufferchange.apply(c,[a])),!0))},this._onsuspend=function(){return c._iO.onsuspend&&(f._wD(c.id+": Playback suspended"),c._iO.onsuspend.apply(c)),!0},this._onfailure=function(a,b,d){c.failures++,f._wD(c.id+": Failure ("+c.failures+"): "+a),c._iO.onfailure&&1===c.failures?c._iO.onfailure(a,b,d):f._wD(c.id+": Ignoring failure")},this._onwarning=function(a,b,d){c._iO.onwarning&&c._iO.onwarning(a,b,d)},this._onfinish=function(){var a=c._iO.onfinish;c._onbufferchange(0),c._resetOnPosition(0),c.instanceCount&&(c.instanceCount--,c.instanceCount||(p(),c.playState=0,c.paused=!1,c.instanceCount=0,c.instanceOptions={},c._iO={},j(),c.isHTML5&&(c.position=0)),c.instanceCount&&!c._iO.multiShotEvents||a&&(f._wD(c.id+": onfinish()"),Qa(c,function(){a.apply(c)})))},this._whileloading=function(a,b,d,e){var f=c._iO;c.bytesLoaded=a,c.bytesTotal=b,c.duration=Math.floor(d),c.bufferLength=e,c.isHTML5||f.isMovieStar?c.durationEstimate=c.duration:f.duration?c.durationEstimate=c.duration>f.duration?c.duration:f.duration:c.durationEstimate=parseInt(c.bytesTotal/c.bytesLoaded*c.duration,10),c.isHTML5||(c.buffered=[{start:0,end:c.duration}]),(3!==c.readyState||c.isHTML5)&&f.whileloading&&f.whileloading.apply(c)},this._whileplaying=function(a,d,e,f,g){var i,h=c._iO;return!isNaN(a)&&null!==a&&(c.position=Math.max(0,a),c._processOnPosition(),!c.isHTML5&&s>8&&(h.usePeakData&&d!==b&&d&&(c.peakData={left:d.leftPeak,right:d.rightPeak}),h.useWaveformData&&e!==b&&e&&(c.waveformData={left:e.split(","),right:f.split(",")}),h.useEQData&&g!==b&&g&&g.leftEQ&&(i=g.leftEQ.split(","),c.eqData=i,c.eqData.left=i,g.rightEQ!==b&&g.rightEQ&&(c.eqData.right=g.rightEQ.split(",")))),1===c.playState&&(c.isHTML5||8!==s||c.position||!c.isBuffering||c._onbufferchange(0),h.whileplaying&&h.whileplaying.apply(c)),!0)},this._oncaptiondata=function(a){f._wD(c.id+": Caption data received."),c.captiondata=a,c._iO.oncaptiondata&&c._iO.oncaptiondata.apply(c,[a])},this._onmetadata=function(a,b){f._wD(c.id+": Metadata received.");var e,g,d={};for(e=0,g=a.length;e<g;e++)d[a[e]]=b[e];c.metadata=d,console.log("updated metadata",c.metadata),c._iO.onmetadata&&c._iO.onmetadata.call(c,c.metadata)},this._onid3=function(a,b){f._wD(c.id+": ID3 data received.");var e,g,d=[];for(e=0,g=a.length;e<g;e++)d[a[e]]=b[e];c.id3=E(c.id3,d),c._iO.onid3&&c._iO.onid3.apply(c)},this._onconnect=function(a){a=1===a,f._wD(c.id+": "+(a?"Connected.":"Failed to connect? - "+c.url),a?1:2),c.connected=a,a&&(c.failures=0,na(c.id)&&(c.getAutoPlay()?c.play(b,c.getAutoPlay()):c._iO.autoLoad&&c.load()),c._iO.onconnect&&c._iO.onconnect.apply(c,[a]))},this._ondataerror=function(a){c.playState>0&&(f._wD(c.id+": Data error: "+a),c._iO.ondataerror&&c._iO.ondataerror.apply(c))},this._debug()},V=function(){return o.body||o.getElementsByTagName("div")[0]},l=function(a){return o.getElementById(a)},E=function(a,c){var e,g,d=a||{};e=c===b?f.defaultOptions:c;for(g in e)e.hasOwnProperty(g)&&d[g]===b&&("object"!=typeof e[g]||null===e[g]?d[g]=e[g]:d[g]=E(d[g],e[g]));return d},Qa=function(b,c){b.isHTML5||8!==s?c():a.setTimeout(c,0)},G={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},F=function(a,c){var d,e=!0,g=c!==b,h=f.setupOptions,i=G;if(a===b){e=[];for(d in h)h.hasOwnProperty(d)&&e.push(d);for(d in i)i.hasOwnProperty(d)&&("object"==typeof f[d]?e.push(d+": {...}"):f[d]instanceof Function?e.push(d+": function() {...}"):e.push(d));return f._wD(fa("setup",e.join(", "))),!1}for(d in a)if(a.hasOwnProperty(d))if("object"!=typeof a[d]||null===a[d]||a[d]instanceof Array||a[d]instanceof RegExp)g&&i[c]!==b?f[c][d]=a[d]:h[d]!==b?(f.setupOptions[d]=a[d],f[d]=a[d]):i[d]===b?(ma(fa(f[d]===b?"setupUndef":"setupError",d),2),e=!1):f[d]instanceof Function?f[d].apply(f,a[d]instanceof Array?a[d]:[a[d]]):f[d]=a[d];else{if(i[d]!==b)return F(a[d],d);ma(fa(f[d]===b?"setupUndef":"setupError",d),2),e=!1}return e},Ga=function(){function d(a){var c=Ha.call(a),d=c.length;return b?(c[1]="on"+c[1],d>3&&c.pop()):3===d&&c.push(!1),c}function e(a,d){var e=a.shift(),f=[c[d]];b?e[f](a[0],a[1]):e[f].apply(e,a)}function f(){e(d(arguments),"add")}function g(){e(d(arguments),"remove")}var b=a.attachEvent,c={add:b?"attachEvent":"addEventListener",remove:b?"detachEvent":"removeEventListener"};return{add:f,remove:g}}(),Na={abort:mb(function(){f._wD(this._s.id+": abort")}),canplay:mb(function(){var c,a=this._s;if(a._html5_canplay)return!0;if(a._html5_canplay=!0,f._wD(a.id+": canplay"),a._onbufferchange(0),c=a._iO.position===b||isNaN(a._iO.position)?null:a._iO.position/db,this.currentTime!==c){f._wD(a.id+": canplay: Setting position to "+c);try{this.currentTime=c}catch(b){f._wD(a.id+": canplay: Setting position of "+c+" failed: "+b.message,2)}}a._iO._oncanplay&&a._iO._oncanplay()}),canplaythrough:mb(function(){var a=this._s;a.loaded||(a._onbufferchange(0),a._whileloading(a.bytesLoaded,a.bytesTotal,a._get_html5_duration()),a._onload(!0))}),durationchange:mb(function(){var b,a=this._s;b=a._get_html5_duration(),isNaN(b)||b===a.duration||(f._wD(this._s.id+": durationchange ("+b+")"+(a.duration?", previously "+a.duration:"")),a.durationEstimate=a.duration=b)}),ended:mb(function(){var a=this._s;f._wD(a.id+": ended"),a._onfinish()}),error:mb(function(){f._wD(this._s.id+": HTML5 error, code "+this.error.code),this._s._onload(!1)}),loadeddata:mb(function(){var a=this._s;f._wD(a.id+": loadeddata"),a._loaded||Wa||(a.duration=a._get_html5_duration())}),loadedmetadata:mb(function(){f._wD(this._s.id+": loadedmetadata")}),loadstart:mb(function(){f._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:mb(function(){this._s._onbufferchange(0)}),playing:mb(function(){f._wD(this._s.id+": playing "+String.fromCharCode(9835)),this._s._onbufferchange(0)}),progress:mb(function(a){var c,d,e,b=this._s,g=0,h="progress"===a.type,i=a.target.buffered,j=a.loaded||0,k=a.total||1;if(b.buffered=[],i&&i.length){for(c=0,d=i.length;c<d;c++)b.buffered.push({start:i.start(c)*db,end:i.end(c)*db});if(g=(i.end(0)-i.start(0))*db,j=Math.min(1,g/(a.target.duration*db)),h&&i.length>1){for(e=[],d=i.length,c=0;c<d;c++)e.push(a.target.buffered.start(c)*db+"-"+a.target.buffered.end(c)*db);f._wD(this._s.id+": progress, timeRanges: "+e.join(", "))}h&&!isNaN(j)&&f._wD(this._s.id+": progress, "+Math.floor(100*j)+"% loaded")}isNaN(j)||(b._whileloading(j,k,b._get_html5_duration()),j&&k&&j===k&&Na.canplaythrough.call(this,a))}),ratechange:mb(function(){f._wD(this._s.id+": ratechange")}),suspend:mb(function(a){var b=this._s;f._wD(this._s.id+": suspend"),Na.progress.call(this,a),b._onsuspend()}),stalled:mb(function(){f._wD(this._s.id+": stalled")}),timeupdate:mb(function(){this._s._onTimer()}),waiting:mb(function(){var a=this._s;f._wD(this._s.id+": waiting"),a._onbufferchange(1)})},Aa=function(a){var b;return b=!(!a||!(a.type||a.url||a.serverURL))&&(!(a.serverURL||a.type&&lb(a.type))&&(a.type?Ba({type:a.type}):Ba({url:a.url})||f.html5Only||a.url.match(/data\:/i)))},Da=function(a){var b;return a&&(b=Wa?eb:f.html5.canPlayType("audio/wav")?fb:eb,a.src=b,void 0!==a._called_unload&&(a._called_load=!1)),Ia&&(Ja=null),b},Ba=function(a){if(!f.useHTML5Audio||!f.hasHTML5)return!1;var g,h,i,j,c=a.url||null,d=a.type||null,e=f.audioFormats;if(d&&f.html5[d]!==b)return f.html5[d]&&!lb(d);if(!Ca){Ca=[];for(j in e)e.hasOwnProperty(j)&&(Ca.push(j),e[j].related&&(Ca=Ca.concat(e[j].related)));Ca=new RegExp("\\.("+Ca.join("|")+")(\\?.*)?$","i")}return i=c?c.toLowerCase().match(Ca):null,i&&i.length?i=i[1]:d?(h=d.indexOf(";"),i=(h!==-1?d.substr(0,h):d).substr(6)):g=!1,i&&f.html5[i]!==b?g=f.html5[i]&&!lb(i):(d="audio/"+i,g=f.html5.canPlayType({type:d}),f.html5[i]=g,g=g&&f.html5[d]&&!lb(d)),g},Fa=function(){function i(b){var c,d,e=!1,g=!1;if(!a||"function"!=typeof a.canPlayType)return e;if(b instanceof Array){for(h=0,d=b.length;h<d;h++)(f.html5[b[h]]||a.canPlayType(b[h]).match(f.html5Test))&&(g=!0,f.html5[b[h]]=!0,f.flash[b[h]]=!!b[h].match(cb));e=g}else c=!(!a||"function"!=typeof a.canPlayType)&&a.canPlayType(b),e=!(!c||!c.match(f.html5Test));return e}if(!f.useHTML5Audio||!f.hasHTML5)return f.html5.usingFlash=!0,ya=!0,!1;var c,d,g,h,a=Audio!==b?Xa&&opera.version()<10?new Audio(null):new Audio:null,e={};g=f.audioFormats;for(c in g)if(g.hasOwnProperty(c)&&(d="audio/"+c,e[c]=i(g[c].type),e[d]=e[c],c.match(cb)?(f.flash[c]=!0,f.flash[d]=!0):(f.flash[c]=!1,
f.flash[d]=!1),g[c]&&g[c].related))for(h=g[c].related.length-1;h>=0;h--)e["audio/"+g[c].related[h]]=e[c],f.html5[g[c].related[h]]=e[c],f.flash[g[c].related[h]]=e[c];return e.canPlayType=a?i:null,f.html5=E(f.html5,e),f.html5.usingFlash=za(),ya=f.html5.usingFlash,!0},P={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:i+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:j+"Verify that %s is a valid path.",tryDebug:"Try "+i+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:j+"Non-HTTP page ("+o.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:j+"Special case: Waiting for SWF to load with window focus...",waitForever:j+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:j+"Waiting for 100% SWF load...",needFunction:j+"Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:j+"_debug(): Current sound objects",waitOnload:j+"Waiting for window.onload()",docLoaded:j+"Document already loaded",onload:j+"initComplete(): calling soundManager.onload()",onloadOK:i+".onload() complete",didInit:j+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:j+"Failed to remove Flash node.",shutdown:i+".disable(): Shutting down",queue:j+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+ia.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:j+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:i+".load(): current URL already assigned.",badFV:i+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:j+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:j+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:i+".setup(): allowed parameters: %s",setupError:i+'.setup(): "%s" cannot be assigned with this method.',setupUndef:i+'.setup(): Could not find option "%s"',setupLate:i+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:j+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. "+String.fromCharCode(10003),reset:i+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device."},fa=function(){var a,b,c,d,e;if(a=Ha.call(arguments),d=a.shift(),e=P&&P[d]?P[d]:"",e&&a&&a.length)for(b=0,c=a.length;b<c;b++)e=e.replace("%s",a[b]);return e},ka=function(a){return 8===s&&a.loops>1&&a.stream&&(B("as2loop"),a.stream=!1),a},la=function(a,b){return a&&!a.usePolicyFile&&(a.onid3||a.usePeakData||a.useWaveformData||a.useEQData)&&(f._wD((b||"")+fa("policy")),a.usePolicyFile=!0),a},ma=function(a){$a&&console.warn!==b?console.warn(a):f._wD(a)},p=function(){return!1},aa=function(a){var b;for(b in a)a.hasOwnProperty(b)&&"function"==typeof a[b]&&(a[b]=p);b=null},ba=function(a){a===b&&(a=!1),(z||a)&&f.disable(a)},ca=function(a){var c,b=null;if(a)if(a.match(/\.swf(\?.*)?$/i)){if(b=a.substr(a.toLowerCase().lastIndexOf(".swf?")+4))return a}else a.lastIndexOf("/")!==a.length-1&&(a+="/");return c=(a&&a.lastIndexOf("/")!==-1?a.substr(0,a.lastIndexOf("/")+1):"./")+f.movieURL,f.noSWFCache&&(c+="?ts="+(new Date).getTime()),c},N=function(){s=parseInt(f.flashVersion,10),8!==s&&9!==s&&(f._wD(fa("badFV",s,_)),f.flashVersion=s=_);var a=f.debugMode||f.debugFlash?"_debug.swf":".swf";f.useHTML5Audio&&!f.html5Only&&f.audioFormats.mp4.required&&s<9&&(f._wD(fa("needfl9")),f.flashVersion=s=9),f.version=f.versionNumber+(f.html5Only?" (HTML5-only mode)":9===s?" (AS3/Flash 9)":" (AS2/Flash 8)"),s>8?(f.defaultOptions=E(f.defaultOptions,f.flash9Options),f.features.buffering=!0,f.defaultOptions=E(f.defaultOptions,f.movieStarOptions),f.filePatterns.flash9=new RegExp("\\.(mp3|"+jb.join("|")+")(\\?.*)?$","i"),f.features.movieStar=!0):f.features.movieStar=!1,f.filePattern=f.filePatterns[8!==s?"flash9":"flash8"],f.movieURL=(8===s?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",a),f.features.peakData=f.features.waveformData=f.features.eqData=s>8},Y=function(a,b){return!!h&&void h._setPolling(a,b)},Z=function(){if(f.debugURLParam.test(n)&&(f.debugMode=!0),l(f.debugID))return!1;var a,b,c,d,e;if(f.debugMode&&!l(f.debugID)&&(!$a||!f.useConsole||!f.consoleOnly)){a=o.createElement("div"),a.id=f.debugID+"-toggle",d={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},a.appendChild(o.createTextNode("-")),a.onclick=ja,a.title="Toggle SM2 debug console",m.match(/msie 6/i)&&(a.style.position="absolute",a.style.cursor="hand");for(e in d)d.hasOwnProperty(e)&&(a.style[e]=d[e]);if(b=o.createElement("div"),b.id=f.debugID,b.style.display=f.debugMode?"block":"none",f.debugMode&&!l(a.id)){try{c=V(),c.appendChild(a)}catch(a){throw new Error(fa("domError")+" \n"+a.toString())}c.appendChild(b)}}c=null},na=this.getSoundById,B=function(a,b){return a?f._wD(fa(a),b):""},ja=function(){var a=l(f.debugID),b=l(f.debugID+"-toggle");return!!a&&(u?(b.innerHTML="+",a.style.display="none"):(b.innerHTML="-",a.style.display="block"),void(u=!u))},v=function(c,d,e){if(a.sm2Debugger!==b)try{sm2Debugger.handleEvent(c,d,e)}catch(a){return!1}return!0},ha=function(){var a=[];return f.debugMode&&a.push(ia.sm2Debug),f.debugFlash&&a.push(ia.flashDebug),f.useHighPerformance&&a.push(ia.highPerf),a.join(" ")},ga=function(){var a=fa("fbHandler"),b=f.getMoviePercent(),c=ia,d={type:"FLASHBLOCK"};return!f.html5Only&&void(f.ok()?(f.didFlashBlock&&f._wD(a+": Unblocked"),f.oMC&&(f.oMC.className=[ha(),c.swfDefault,c.swfLoaded+(f.didFlashBlock?" "+c.swfUnblocked:"")].join(" "))):(ya&&(f.oMC.className=ha()+" "+c.swfDefault+" "+(null===b?c.swfTimedout:c.swfError),f._wD(a+": "+fa("fbTimeout")+(b?" ("+fa("fbLoaded")+")":""))),f.didFlashBlock=!0,I({type:"ontimeout",ignoreInit:!0,error:d}),X(d)))},H=function(a,c,d){t[a]===b&&(t[a]=[]),t[a].push({method:c,scope:d||null,fired:!1})},I=function(a){if(a||(a={type:f.ok()?"onready":"ontimeout"}),!y&&a&&!a.ignoreInit)return!1;if("ontimeout"===a.type&&(f.ok()||z&&!a.ignoreInit))return!1;var e,g,b={success:a&&a.ignoreInit?f.ok():!z},c=a&&a.type?t[a.type]||[]:[],d=[],h=[b],i=ya&&!f.ok();for(a.error&&(h[0].error=a.error),e=0,g=c.length;e<g;e++)c[e].fired!==!0&&d.push(c[e]);if(d.length)for(e=0,g=d.length;e<g;e++)d[e].scope?d[e].method.apply(d[e].scope,h):d[e].method.apply(this,h),i||(d[e].fired=!0);return!0},J=function(){a.setTimeout(function(){f.useFlashBlock&&ga(),I(),"function"==typeof f.onload&&(B("onload",1),f.onload.apply(a),B("onloadOK",1)),f.waitForWindowLoad&&Ga.add(a,"load",J)},1)},La=function(){if(Ka!==b)return Ka;var f,g,h,c=!1,d=navigator,e=d.plugins,i=a.ActiveXObject;if(e&&e.length)g="application/x-shockwave-flash",h=d.mimeTypes,h&&h[g]&&h[g].enabledPlugin&&h[g].enabledPlugin.description&&(c=!0);else if(i!==b&&!m.match(/MSAppHost/i)){try{f=new i("ShockwaveFlash.ShockwaveFlash")}catch(a){f=null}c=!!f,f=null}return Ka=c,c},za=function(){var a,b,c=f.audioFormats,d=Sa&&!!m.match(/os (1|2|3_0|3_1)\s/i);if(d?(f.hasHTML5=!1,f.html5Only=!0,f.oMC&&(f.oMC.style.display="none")):f.useHTML5Audio&&(f.html5&&f.html5.canPlayType||(f._wD("SoundManager: No HTML5 Audio() support detected."),f.hasHTML5=!1),Za&&f._wD(j+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(Ka?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),f.useHTML5Audio&&f.hasHTML5){xa=!0;for(b in c)c.hasOwnProperty(b)&&c[b].required&&(f.html5.canPlayType(c[b].type)?f.preferFlash&&(f.flash[b]||f.flash[c[b].type])&&(a=!0):(xa=!1,a=!0))}return f.ignoreFlash&&(a=!1,xa=!0),f.html5Only=f.hasHTML5&&f.useHTML5Audio&&!a,!f.html5Only},va=function(a){var b,c,e,d=0;if(a instanceof Array){for(b=0,c=a.length;b<c;b++)if(a[b]instanceof Object){if(f.canPlayMIME(a[b].type)){d=b;break}}else if(f.canPlayURL(a[b])){d=b;break}a[d].url&&(a[d]=a[d].url),e=a[d]}else e=a;return e},qa=function(a){a._hasTimer||(a._hasTimer=!0,!Ya&&f.html5PollingInterval&&(null===ua&&0===ta&&(ua=setInterval(sa,f.html5PollingInterval)),ta++))},ra=function(a){a._hasTimer&&(a._hasTimer=!1,!Ya&&f.html5PollingInterval&&ta--)},sa=function(){var a;if(null!==ua&&!ta)return clearInterval(ua),ua=null,!1;for(a=f.soundIDs.length-1;a>=0;a--)f.sounds[f.soundIDs[a]].isHTML5&&f.sounds[f.soundIDs[a]]._hasTimer&&f.sounds[f.soundIDs[a]]._onTimer()},X=function(c){c=c!==b?c:{},"function"==typeof f.onerror&&f.onerror.apply(a,[{type:c.type!==b?c.type:null}]),c.fatal!==b&&c.fatal&&f.disable()},Ma=function(){if(!Za||!La())return!1;var b,c,a=f.audioFormats;for(c in a)if(a.hasOwnProperty(c)&&("mp3"===c||"mp4"===c)&&(f._wD(i+": Using flash fallback for "+c+" format"),f.html5[c]=!1,a[c]&&a[c].related))for(b=a[c].related.length-1;b>=0;b--)f.html5[a[c].related[b]]=!1},this._setSandboxType=function(a){var c=f.sandbox;c.type=a,c.description=c.types[c.types[a]!==b?a:"unknown"],"localWithFile"===c.type?(c.noRemote=!0,c.noLocal=!1,B("secNote",2)):"localWithNetwork"===c.type?(c.noRemote=!1,c.noLocal=!0):"localTrusted"===c.type&&(c.noRemote=!1,c.noLocal=!1)},this._externalInterfaceOK=function(a){if(f.swfLoaded)return!1;var b;return v("swf",!0),v("flashtojs",!0),f.swfLoaded=!0,ab=!1,Za&&Ma(),a&&a.replace(/\+dev/i,"")===f.versionNumber.replace(/\+dev/i,"")?void setTimeout(r,Ua?100:1):(b=i+': Fatal: JavaScript file build "'+f.versionNumber+'" does not match Flash SWF build "'+a+'" at '+f.url+". Ensure both are up-to-date.",setTimeout(function(){throw new Error(b)},0),!1)},W=function(a,c){function d(){var b,a=[],c=[],d=" + ";b="SoundManager "+f.version+(!f.html5Only&&f.useHTML5Audio?f.hasHTML5?" + HTML5 audio":", no HTML5 audio support":""),f.html5Only?f.html5PollingInterval&&a.push("html5PollingInterval ("+f.html5PollingInterval+"ms)"):(f.preferFlash&&a.push("preferFlash"),f.useHighPerformance&&a.push("useHighPerformance"),f.flashPollingInterval&&a.push("flashPollingInterval ("+f.flashPollingInterval+"ms)"),f.html5PollingInterval&&a.push("html5PollingInterval ("+f.html5PollingInterval+"ms)"),f.wmode&&a.push("wmode ("+f.wmode+")"),f.debugFlash&&a.push("debugFlash"),f.useFlashBlock&&a.push("flashBlock")),a.length&&(c=c.concat([a.join(d)])),f._wD(b+(c.length?d+c.join(", "):""),1),Oa()}function A(a,b){return'<param name="'+a+'" value="'+b+'" />'}if(w&&x)return!1;if(f.html5Only)return N(),d(),f.oMC=l(f.movieID),r(),w=!0,x=!0,!1;var p,q,s,t,u,v,y,z,e=c||f.url,g=f.altURL||e,h="JS/Flash audio component (SoundManager 2)",i=V(),j=ha(),k=null,n=o.getElementsByTagName("html")[0];if(k=n&&n.dir&&n.dir.match(/rtl/i),a=a===b?f.id:a,N(),f.url=ca(gb?e:g),c=f.url,f.wmode=!f.wmode&&f.useHighPerformance?"transparent":f.wmode,null!==f.wmode&&(m.match(/msie 8/i)||!Ua&&!f.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(wa.push(P.spcWmode),f.wmode=null),p={name:a,id:a,src:c,quality:"high",allowScriptAccess:f.allowScriptAccess,bgcolor:f.bgColor,pluginspage:hb+"www.macromedia.com/go/getflashplayer",title:h,type:"application/x-shockwave-flash",wmode:f.wmode,hasPriority:"true"},f.debugFlash&&(p.FlashVars="debug=1"),f.wmode||delete p.wmode,Ua)q=o.createElement("div"),t=['<object id="'+a+'" data="'+c+'" type="'+p.type+'" title="'+p.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+hb+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',A("movie",c),A("AllowScriptAccess",f.allowScriptAccess),A("quality",p.quality),f.wmode?A("wmode",f.wmode):"",A("bgcolor",f.bgColor),A("hasPriority","true"),f.debugFlash?A("FlashVars",p.FlashVars):"","</object>"].join("");else{q=o.createElement("embed");for(s in p)p.hasOwnProperty(s)&&q.setAttribute(s,p[s])}if(Z(),j=ha(),i=V())if(f.oMC=l(f.movieID)||o.createElement("div"),f.oMC.id)z=f.oMC.className,f.oMC.className=(z?z+" ":ia.swfDefault)+(j?" "+j:""),f.oMC.appendChild(q),Ua&&(u=f.oMC.appendChild(o.createElement("div")),u.className=ia.swfBox,u.innerHTML=t),x=!0;else{if(f.oMC.id=f.movieID,f.oMC.className=ia.swfDefault+" "+j,v=null,u=null,f.useFlashBlock||(f.useHighPerformance?v={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(v={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},k&&(v.left=Math.abs(parseInt(v.left,10))+"px"))),Va&&(f.oMC.style.zIndex=1e4),!f.debugFlash)for(y in v)v.hasOwnProperty(y)&&(f.oMC.style[y]=v[y]);try{Ua||f.oMC.appendChild(q),i.appendChild(f.oMC),Ua&&(u=f.oMC.appendChild(o.createElement("div")),u.className=ia.swfBox,u.innerHTML=t),x=!0}catch(a){throw new Error(fa("domError")+" \n"+a.toString())}}return w=!0,d(),!0},Q=function(){return f.html5Only?(W(),!1):!h&&(f.url?(h=f.getMovie(f.id),h||(da?(Ua?f.oMC.innerHTML=ea:f.oMC.appendChild(da),da=null,w=!0):W(f.id,f.url),h=f.getMovie(f.id)),"function"==typeof f.oninitmovie&&setTimeout(f.oninitmovie,1),Pa(),!0):(B("noURL"),!1))},K=function(){setTimeout(L,1e3)},M=function(){a.setTimeout(function(){ma(j+"useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."),f.setup({preferFlash:!1}).reboot(),f.didFlashBlock=!0,f.beginDelayedInit()},1)},L=function(){var b,c=!1;return!!f.url&&(!oa&&(oa=!0,Ga.remove(a,"load",K),Ka&&ab&&!_a?(B("waitFocus"),!1):(y||(b=f.getMoviePercent(),b>0&&b<100&&(c=!0)),void setTimeout(function(){return b=f.getMoviePercent(),c?(oa=!1,f._wD(fa("waitSWF")),a.setTimeout(K,1),!1):(y||(f._wD(i+": No Flash response within expected time. Likely causes: "+(0===b?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(f.debugFlash?" "+fa("checkSWF"):""),2),!gb&&b&&(B("localFail",2),f.debugFlash||B("tryDebug",2)),0===b&&f._wD(fa("swf404",f.url),1),v("flashtojs",!1," (Check flash security or flash blockers)")),void(!y&&bb&&(null===b?f.useFlashBlock||0===f.flashLoadTimeout?(f.useFlashBlock&&ga(),B("waitForever")):!f.useFlashBlock&&xa?M():(B("waitForever"),I({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}})):0===f.flashLoadTimeout?B("waitForever"):!f.useFlashBlock&&xa?M():ba(!0))))},f.flashLoadTimeout))))},O=function(){function b(){Ga.remove(a,"focus",O)}return _a||!ab?(b(),!0):(bb=!0,_a=!0,B("gotFocus"),oa=!1,K(),b(),!0)},Pa=function(){wa.length&&(f._wD("SoundManager 2: "+wa.join(" "),1),wa=[])},Oa=function(){Pa();var a,b=[];if(f.useHTML5Audio&&f.hasHTML5){for(a in f.audioFormats)f.audioFormats.hasOwnProperty(a)&&b.push(a+" = "+f.html5[a]+(!f.html5[a]&&ya&&f.flash[a]?" (using flash)":f.preferFlash&&f.flash[a]&&ya?" (preferring flash)":f.html5[a]?"":" ("+(f.audioFormats[a].required?"required, ":"")+"and no flash support)"));f._wD("SoundManager 2 HTML5 support: "+b.join(", "),1)}},D=function(b){if(y)return!1;if(f.html5Only)return B("sm2Loaded",1),y=!0,J(),v("onload",!0),!0;var e,c=f.useFlashBlock&&f.flashLoadTimeout&&!f.getMoviePercent(),d=!0;return c||(y=!0),e={type:!Ka&&ya?"NO_FLASH":"INIT_TIMEOUT"},f._wD("SoundManager 2 "+(z?"failed to load":"loaded")+" ("+(z?"Flash security/load error":"OK")+") "+String.fromCharCode(z?10006:10003),z?2:1),z||b?(f.useFlashBlock&&f.oMC&&(f.oMC.className=ha()+" "+(null===f.getMoviePercent()?ia.swfTimedout:ia.swfError)),I({type:"ontimeout",error:e,ignoreInit:!0}),v("onload",!1),X(e),d=!1):v("onload",!0),z||(f.waitForWindowLoad&&!A?(B("waitOnload"),Ga.add(a,"load",J)):(f.waitForWindowLoad&&A&&B("docLoaded"),J())),d},q=function(){var a,c=f.setupOptions;for(a in c)c.hasOwnProperty(a)&&(f[a]===b?f[a]=c[a]:f[a]!==c[a]&&(f.setupOptions[a]=f[a]))},r=function(){function b(){Ga.remove(a,"load",f.beginDelayedInit)}if(y)return B("didInit"),!1;if(f.html5Only)return y||(b(),f.enabled=!0,D()),!0;Q();try{h._externalInterfaceTest(!1),Y(!0,f.flashPollingInterval||(f.useHighPerformance?10:50)),f.debugMode||h._disableDebug(),f.enabled=!0,v("jstoflash",!0),f.html5Only||Ga.add(a,"unload",p)}catch(a){return f._wD("js/flash exception: "+a.toString()),v("jstoflash",!1),X({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),ba(!0),D(),!1}return D(),b(),!0},S=function(){return!U&&(U=!0,q(),Z(),function(){var a="sm2-usehtml5audio=",b="sm2-preferflash=",c=null,d=null,e=n.toLowerCase();e.indexOf(a)!==-1&&(c="1"===e.charAt(e.indexOf(a)+a.length),$a&&console.log((c?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),f.setup({useHTML5Audio:c})),e.indexOf(b)!==-1&&(d="1"===e.charAt(e.indexOf(b)+b.length),$a&&console.log((d?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),f.setup({preferFlash:d}))}(),!Ka&&f.hasHTML5&&(f._wD("SoundManager 2: No Flash detected"+(f.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),f.setup({useHTML5Audio:!0,preferFlash:!1})),Fa(),!Ka&&ya&&(wa.push(P.needFlash),f.setup({flashLoadTimeout:1})),o.removeEventListener&&o.removeEventListener("DOMContentLoaded",S,!1),Q(),!0)},Ea=function(){return"complete"===o.readyState&&(S(),o.detachEvent("onreadystatechange",Ea)),!0},T=function(){A=!0,S(),Ga.remove(a,"load",T)},R=function(){Ya&&(f.setupOptions.useHTML5Audio&&!f.setupOptions.preferFlash||wa.push(P.mobileUA),f.setupOptions.useHTML5Audio=!0,f.setupOptions.preferFlash=!1,(Sa||Ta&&!m.match(/android\s2\.3/i))&&(wa.push(P.globalHTML5),Sa&&(f.ignoreFlash=!0),Ia=!0))},R(),La(),Ga.add(a,"focus",O),Ga.add(a,"load",K),Ga.add(a,"load",T),o.addEventListener?o.addEventListener("DOMContentLoaded",S,!1):o.attachEvent?o.attachEvent("onreadystatechange",Ea):(v("onload",!1),X({type:"NO_DOM2_EVENTS",fatal:!0}))}if(!a||!a.document)throw new Error("SoundManager requires a browser with window and document objects.");var c=null;void 0!==a.SM2_DEFER&&SM2_DEFER||(c=new d),"object"==typeof module&&module&&"object"==typeof module.exports?(a.soundManager=c,module.exports.SoundManager=d,module.exports.soundManager=c):"function"==typeof define&&define.amd?define("SoundManager",[],function(){return{SoundManager:d,soundManager:c}}):(a.SoundManager=d,a.soundManager=c)}(window);var ngSoundManager=angular.module("angularSoundManager",[]).config(["$logProvider",function(a){a.debugEnabled(!1)}]);ngSoundManager.filter("humanTime",function(){return function(a){function b(a){return a<10?"0"+a.toString():a.toString()}var c=a/1e3/60<<0,d=Math.round(a/1e3%60);return b(c)+":"+b(d)}}),ngSoundManager.factory("angularPlayer",["$rootScope","$log",function(a,b){var c=null,d=!1,e=!0,f=!1,g=90,h=0,i=[];return{init:function(){"undefined"==typeof soundManager&&alert("Please include SoundManager2 Library!"),soundManager.setup({preferFlash:!1,debugMode:!1,useHTML5Audio:!0,onready:function(){},ontimeout:function(){alert("SM2 failed to start. Flash missing, blocked or security error?"),alert("The status is "+status.success+", the error type is "+status.error.type)},defaultOptions:{autoLoad:!1,autoPlay:!1,from:null,loops:1,multiShot:!1,multiShotEvents:!1,onid3:null,onload:null,onstop:null,onfailure:"nextTrack",onpause:null,onplay:null,onresume:null,position:null,pan:0,stream:!0,to:null,type:"audio/mp3",usePolicyFile:!1,volume:g,whileloading:function(){var b=this.bytesLoaded/this.bytesTotal*100;a.$broadcast("track:loaded",b)},whileplaying:function(){c=this.id,h=this.position/this.duration*100,a.$broadcast("track:progress",h),a.$broadcast("currentTrack:position",this.position),a.$broadcast("currentTrack:duration",this.duration)},onfinish:function(){if(soundManager._writeDebug(this.id+" finished playing"),e===!0){var b=angular.element(document.querySelector("[ng-app]")),d=b.injector(),f=d.get("angularPlayer");f.nextTrack(),a.$broadcast("track:id",c)}}}}),soundManager.onready(function(){b.debug("song manager ready!");var c=soundManager.ok();b.debug("is supported: "+c),a.$broadcast("angularPlayer:ready",!0)})},isInArray:function(a,b){for(var c=0;c<a.length;c++)if(a[c].id===b)return c;return!1},getIndexByValue:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return!1},asyncLoop:function(a){var b=-1,c=function(){return b++,b==a.length?void a.callback():void a.functionToLoop(c,b)};c()},setCurrentTrack:function(a){c=a},getCurrentTrack:function(){return c},currentTrackData:function(){var a=this.getCurrentTrack(),b=this.isInArray(i,a);return i[b]},getPlaylist:function(a){return"undefined"==typeof a?i:i[a]},addToPlaylist:function(b){i.push(b),a.$broadcast("player:playlist",i)},isTrackValid:function(a){if("undefined"==typeof a)return b.debug("invalid track data"),!1;if(a.url.indexOf("soundcloud")>-1){if("undefined"==typeof a.url)return b.debug("invalid soundcloud track url"),!1}else if(soundManager.canPlayURL(a.url)!==!0)return b.debug("invalid song url"),!1},addTrack:function(a){if(!this.isTrackValid)return null;var b=this.isInArray(this.getPlaylist(),a.id);return b===!1&&(soundManager.createSound({id:a.id,url:a.url}),this.addToPlaylist(a)),a.id},removeSong:function(b,d){b===c&&this.stop(),soundManager.destroySound(b),i.splice(d,1),a.$broadcast("player:playlist",i)},initPlayTrack:function(b,c){c!==!0&&(this.stop(),this.setCurrentTrack(b)),soundManager.play(b),a.$broadcast("track:id",b),f=!0,a.$broadcast("music:isPlaying",f)},initPlaySingleTrack:function(b){soundManager.playSingleTrack(b),a.$broadcast("track:id",0),f=!0,a.$broadcast("music:isPlaying",f)},play:function(){var a=null;if(null===this.getCurrentTrack()){if(0===soundManager.soundIDs.length)return void b.debug("playlist is empty!");a=soundManager.soundIDs[0],this.initPlayTrack(a)}else a=this.getCurrentTrack(),this.initPlayTrack(a,!0)},pause:function(){soundManager.pause(this.getCurrentTrack()),f=!1,a.$broadcast("music:isPlaying",f)},stop:function(){this.pause(),this.resetProgress(),a.$broadcast("track:progress",h),a.$broadcast("currentTrack:position",0),a.$broadcast("currentTrack:duration",0),soundManager.stopAll(),soundManager.unload(this.getCurrentTrack())},playTrack:function(a){this.initPlayTrack(a)},playSingleTrack:function(a){this.initPlaySingleTrack(a)},nextTrack:function(){if(null===this.getCurrentTrack())return b.debug("Please click on Play before this action"),null;var c=this.getIndexByValue(soundManager.soundIDs,this.getCurrentTrack()),e=+c+1,g=soundManager.soundIDs[e];"undefined"!=typeof g?this.playTrack(g):d===!0?this.playTrack(soundManager.soundIDs[0]):(f=!1,a.$broadcast("music:isPlaying",f))},prevTrack:function(){if(null===this.getCurrentTrack())return b.debug("Please click on Play before this action"),null;var a=this.getIndexByValue(soundManager.soundIDs,this.getCurrentTrack()),c=+a-1,d=soundManager.soundIDs[c];"undefined"!=typeof d?this.playTrack(d):b.debug("no prev track found!")},mute:function(){soundManager.muted===!0?soundManager.unmute():soundManager.mute(),a.$broadcast("music:mute",soundManager.muted)},getMuteStatus:function(){return soundManager.muted},repeatToggle:function(){d=d!==!0,a.$broadcast("music:repeat",d)},getRepeatStatus:function(){return d},getVolume:function(){return g},adjustVolume:function(b){var c=function(b){for(var c=0;c<soundManager.soundIDs.length;c++){var d=soundManager.getSoundById(soundManager.soundIDs[c]);d.setVolume(b)}a.$broadcast("music:volume",b)};b===!0?g<100&&(g+=10,c(g)):g>0&&(g-=10,c(g))},adjustVolumeSlider:function(b){var c=function(b){for(var c=0;c<soundManager.soundIDs.length;c++){var d=soundManager.getSoundById(soundManager.soundIDs[c]);d.setVolume(b)}a.$broadcast("music:volume",b)};c(b)},clearPlaylist:function(c){b.debug("clear playlist"),this.resetProgress();var d=soundManager.soundIDs.length;this.asyncLoop({length:d,functionToLoop:function(a,b){setTimeout(function(){soundManager.destroySound(soundManager.soundIDs[0]),a()},100)},callback:function(){b.debug("All done!"),i=[],a.$broadcast("player:playlist",i),c(!0)}})},resetProgress:function(){h=0},isPlayingStatus:function(){return f}}}]),ngSoundManager.directive("soundManager",["$filter","angularPlayer",function(a,b){return{restrict:"E",link:function(c,d,e){b.init(),c.$on("track:progress",function(a,b){c.$apply(function(){c.progress=b})}),c.$on("track:id",function(a,d){c.$apply(function(){c.currentPlaying=b.currentTrackData()})}),c.$on("currentTrack:position",function(b,d){c.$apply(function(){c.currentPostion=a("humanTime")(d)})}),c.$on("currentTrack:duration",function(b,d){c.$apply(function(){c.currentDuration=a("humanTime")(d)})}),c.isPlaying=!1,c.$on("music:isPlaying",function(a,b){c.$apply(function(){c.isPlaying=b})}),c.playlist=b.getPlaylist(),c.$on("player:playlist",function(a,b){c.$apply(function(){c.playlist=b})})}}}]),ngSoundManager.directive("musicPlayer",["angularPlayer","$log",function(a,b){return{restrict:"EA",scope:{song:"=addSong"},link:function(c,d,e){var f=function(){var b=a.addTrack(c.song);"play"===e.musicPlayer&&a.playTrack(b)};d.bind("click",function(){b.debug("adding song to playlist"),f()})}}}]),ngSoundManager.directive("playSingleTrack",["angularPlayer","$log",function(a,b){return{restrict:"EA",scope:{song:"=playTrack"},link:function(c,d,e){var f=function(){a.stop(),a.playSingleTrack(c.song.url)};d.bind("click",function(){b.debug("playing song"),f()})}}}]),ngSoundManager.directive("playFromPlaylist",["angularPlayer",function(a){return{restrict:"EA",scope:{song:"=playFromPlaylist"},link:function(b,c,d){c.bind("click",function(c){a.playTrack(b.song.id)})}}}]),ngSoundManager.directive("removeFromPlaylist",["angularPlayer",function(a){return{restrict:"EA",scope:{song:"=removeFromPlaylist"},link:function(b,c,d){c.bind("click",function(c){a.removeSong(b.song.id,d.index)})}}}]),ngSoundManager.directive("seekTrack",["angularPlayer","$log",function(a,b){return{restrict:"EA",link:function(c,d,e){d.bind("click",function(c){if(null===a.getCurrentTrack())return void b.debug("no track loaded");var e=soundManager.getSoundById(a.getCurrentTrack()),f=function(a){for(var b=0,c=a.target;c&&!isNaN(c.offsetLeft)&&!isNaN(c.offsetTop);)b+=c.offsetLeft-c.scrollLeft,c=c.offsetParent;return a.clientX-b},g=c.offsetX||f(c),h=d[0].clientWidth,i=e.durationEstimate;e.setPosition(g/h*i)})}}}]),ngSoundManager.directive("playMusic",["angularPlayer",function(a){return{restrict:"EA",link:function(b,c,d){c.bind("click",function(b){a.play()})}}}]),ngSoundManager.directive("pauseMusic",["angularPlayer",function(a){return{restrict:"EA",link:function(b,c,d){c.bind("click",function(b){a.pause()})}}}]),ngSoundManager.directive("stopMusic",["angularPlayer",function(a){return{restrict:"EA",link:function(b,c,d){c.bind("click",function(b){a.stop()})}}}]),ngSoundManager.directive("nextTrack",["angularPlayer",function(a){return{restrict:"EA",link:function(b,c,d){c.bind("click",function(b){a.nextTrack()})}}}]),ngSoundManager.directive("prevTrack",["angularPlayer",function(a){return{restrict:"EA",link:function(b,c,d){c.bind("click",function(b){a.prevTrack()})}}}]),ngSoundManager.directive("muteMusic",["angularPlayer",function(a){return{restrict:"EA",link:function(b,c,d){c.bind("click",function(b){a.mute()}),b.mute=a.getMuteStatus(),b.$on("music:mute",function(a,c){b.$apply(function(){b.mute=c})})}}}]),ngSoundManager.directive("repeatMusic",["angularPlayer",function(a){return{restrict:"EA",link:function(b,c,d){c.bind("click",function(b){a.repeatToggle()}),b.repeat=a.getRepeatStatus(),b.$on("music:repeat",function(a,c){b.$apply(function(){b.repeat=c})})}}}]),ngSoundManager.directive("musicVolume",["angularPlayer",function(a){return{restrict:"EA",link:function(b,c,d){c.bind("click",function(b){"increase"===d.type?a.adjustVolume(!0):a.adjustVolume(!1)}),b.volume=a.getVolume(),b.$on("music:volume",function(a,c){b.$apply(function(){b.volume=c})})}}}]),ngSoundManager.directive("clearPlaylist",["angularPlayer","$log",function(a,b){return{restrict:"EA",link:function(c,d,e){d.bind("click",function(c){a.stop(),a.setCurrentTrack(null),a.clearPlaylist(function(a){b.debug("all clear!")})})}}}]),ngSoundManager.directive("playAll",["angularPlayer","$log",function(a,b){return{restrict:"EA",scope:{songs:"=playAll"},link:function(c,d,e){d.bind("click",function(d){a.clearPlaylist(function(d){b.debug("cleared, ok now add to playlist");for(var f=0;f<c.songs.length;f++)a.addTrack(c.songs[f]);"false"!=e.play&&a.play()})})}}}]),ngSoundManager.directive("volumeBar",["angularPlayer",function(a){return{restrict:"EA",link:function(b,c,d){c.bind("click",function(b){var d=function(a){for(var b=0,c=a.target;c&&!isNaN(c.offsetLeft)&&!isNaN(c.offsetTop);)b+=c.offsetLeft-c.scrollLeft,c=c.offsetParent;return a.clientX-b},e=b.offsetX||d(b),f=c[0].clientWidth,g=100,h=e/f*g;a.adjustVolumeSlider(h)}),b.volume=a.getVolume(),b.$on("music:volume",function(a,c){b.$apply(function(){b.volume=c})})}}}]),ngSoundManager.directive("playPauseToggle",["angularPlayer",function(a){return{restrict:"EA",link:function(b,c,d){b.$on("music:isPlaying",function(a,b){b?"undefined"!=typeof d.pause?c.html(d.pause):c.html("Pause"):"undefined"!=typeof d.play?c.html(d.play):c.html("Play")}),c.bind("click",function(b){a.isPlayingStatus()?a.pause():a.play()})}}}]);